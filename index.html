<!DOCTYPE html>
<html>
<head>
    <title>Eternal Empire - Test</title>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; }
        canvas { display: block; }
        #loading { 
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            color: white; 
            font-size: 24px; 
            z-index: 1000; 
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div id="loading">Loading Game...</div>
    <canvas id="gameCanvas"></canvas>

    <script>
        // SIMPLIFIED WORKING VERSION
        console.log("Starting Eternal Empire...");
        
        // Hide loading screen
        setTimeout(() => {
            document.getElementById('loading').style.display = 'none';
            startGame();
        }, 1000);
        
        function startGame() {
            console.log("Initializing game...");
            
            // Create scene
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x87CEEB);
            
            // Create camera
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 2, 5);
            
            // Create renderer
            const canvas = document.getElementById('gameCanvas');
            const renderer = new THREE.WebGLRenderer({ canvas: canvas });
            renderer.setSize(window.innerWidth, window.innerHeight);
            
            // Add lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(100, 100, 50);
            scene.add(directionalLight);
            
            // Create ground
            const groundGeometry = new THREE.PlaneGeometry(100, 100);
            const groundMaterial = new THREE.MeshStandardMaterial({ color: 0x2ecc71 });
            const ground = new THREE.Mesh(groundGeometry, groundMaterial);
            ground.rotation.x = -Math.PI / 2;
            scene.add(ground);
            
            // Create player (cube)
            const playerGeometry = new THREE.BoxGeometry(1, 2, 1);
            const playerMaterial = new THREE.MeshStandardMaterial({ color: 0x3498db });
            const player = new THREE.Mesh(playerGeometry, playerMaterial);
            player.position.y = 1;
            scene.add(player);
            
            // Create some resources
            const resources = [];
            for (let i = 0; i < 10; i++) {
                const geometry = new THREE.BoxGeometry(0.5, 0.5, 0.5);
                const material = new THREE.MeshStandardMaterial({ color: 0xffaa00 });
                const resource = new THREE.Mesh(geometry, material);
                
                resource.position.x = Math.random() * 40 - 20;
                resource.position.z = Math.random() * 40 - 20;
                resource.position.y = 0.25;
                
                scene.add(resource);
                resources.push(resource);
            }
            
            // Controls
            const keys = {};
            document.addEventListener('keydown', (e) => keys[e.key.toLowerCase()] = true);
            document.addEventListener('keyup', (e) => keys[e.key.toLowerCase()] = false);
            
            // Game loop
            function animate() {
                requestAnimationFrame(animate);
                
                // Move player
                const speed = 0.1;
                if (keys['w'] || keys['arrowup']) player.position.z -= speed;
                if (keys['s'] || keys['arrowdown']) player.position.z += speed;
                if (keys['a'] || keys['arrowleft']) player.position.x -= speed;
                if (keys['d'] || keys['arrowright']) player.position.x += speed;
                
                // Keep player on ground
                player.position.y = 1;
                
                // Make camera follow player
                camera.position.x = player.position.x;
                camera.position.z = player.position.z + 5;
                camera.lookAt(player.position);
                
                // Rotate resources
                resources.forEach(resource => {
                    resource.rotation.y += 0.02;
                });
                
                renderer.render(scene, camera);
            }
            
            // Start game loop
            animate();
            
            console.log("Game started! Use WASD to move.");
            
            // Show controls
            alert("Game Started!\n\nUse WASD keys to move around\nCollect the golden cubes (resources)\n\nClick OK to begin!");
        }
        
        // Handle window resize
        window.addEventListener('resize', () => {
            if (camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        });
    </script>
</body>
</html>
